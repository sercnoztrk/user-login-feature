<% include ./partials/header %>

    <div class="container mt-4">
        <% if(!loggedUser) { %>
            <div class="jumbotron">
                <div class="container">
                    <h1 class="display-4">Dashboard</h1>
                    <p class="lead">You may check your daily registration log or user statistics like web page visitor count, registered users but not verified and logged in users</p>
                    <hr class="my-5">
                </div>
            </div>
        <% } %>

        <% if(loggedUser) { %>
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Sign Up Log</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">User Stats</a>
                </li>
                <li class="nav-item">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Sessions</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Date</th>
                                <th scope="col">Count</th>
                                <!-- <th scope="col">Handle</th> -->
                            </tr>
                        </thead>
                        <tbody>
                            <% list.regList.forEach(function(listItem, index) { %>
                                <tr>
                                    <th scope="row"><%= index + 1 %></th>
                                    <td><%= listItem.date %></td>
                                    <td><%= listItem.count %></td>
                                    <!-- <td>@mdo</td> -->
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                    <h4 class="mt-3">Active users: <span id="counter">0</span></h4>
                    <hr>
                    <h4>Users logged in:</h4>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% list.activeList.forEach(function(listItem, index) { %>
                                <tr>
                                    <th scope="row"><%= index + 1 %></th>
                                    <td><%= listItem.name %></td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                    <hr>
                    <h4 class="mt-3">Unverified Users:</h4>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Name</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% list.verifyList.forEach(function(listItem, index) { %>
                                <tr>
                                    <th scope="row"><%= index + 1 %></th>
                                    <td><%= listItem.name %></td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">Not implemented</div>
            </div>
        <% } %>
    </div>

<% include ./partials/footer %> 